<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nameless Engine: ne::DynamicCpuWriteShaderResourceArrayManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Nameless Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classne_1_1DynamicCpuWriteShaderResourceArrayManager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classne_1_1DynamicCpuWriteShaderResourceArrayManager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ne::DynamicCpuWriteShaderResourceArrayManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="DynamicCpuWriteShaderResourceArrayManager_8h_source.html">DynamicCpuWriteShaderResourceArrayManager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a236503d677bb1925b576ca664d1e0b2f"><td class="memItemLeft" align="right" valign="top"><a id="a236503d677bb1925b576ca664d1e0b2f" name="a236503d677bb1925b576ca664d1e0b2f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DynamicCpuWriteShaderResourceArrayManager</b> (const <a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html">DynamicCpuWriteShaderResourceArrayManager</a> &amp;)=delete</td></tr>
<tr class="separator:a236503d677bb1925b576ca664d1e0b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25f22fd962f595606e10139af2139a46"><td class="memItemLeft" align="right" valign="top"><a id="a25f22fd962f595606e10139af2139a46" name="a25f22fd962f595606e10139af2139a46"></a>
<a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html">DynamicCpuWriteShaderResourceArrayManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html">DynamicCpuWriteShaderResourceArrayManager</a> &amp;)=delete</td></tr>
<tr class="separator:a25f22fd962f595606e10139af2139a46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99cd6f7a677bf97ab36c9ee8b0cca10a"><td class="memItemLeft" align="right" valign="top">std::variant&lt; std::unique_ptr&lt; <a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArraySlot.html">DynamicCpuWriteShaderResourceArraySlot</a> &gt;, <a class="el" href="classne_1_1Error.html">Error</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html#a99cd6f7a677bf97ab36c9ee8b0cca10a">reserveSlotsInArray</a> (<a class="el" href="classne_1_1ShaderCpuWriteResourceBinding.html">ShaderCpuWriteResourceBinding</a> *pShaderResource)</td></tr>
<tr class="separator:a99cd6f7a677bf97ab36c9ee8b0cca10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656266f96634a2bac890181a028d17eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArray.html">DynamicCpuWriteShaderResourceArray</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html#a656266f96634a2bac890181a028d17eb">getArrayForShaderResource</a> (const std::string &amp;sShaderResourceName)</td></tr>
<tr class="separator:a656266f96634a2bac890181a028d17eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a23ccad251759dad28a838bba4707595f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html#a23ccad251759dad28a838bba4707595f">DynamicCpuWriteShaderResourceArrayManager</a> (<a class="el" href="classne_1_1GpuResourceManager.html">GpuResourceManager</a> *<a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html#a72c1e9f423b132a8b28bdb05ab7974e5">pResourceManager</a>)</td></tr>
<tr class="separator:a23ccad251759dad28a838bba4707595f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0cf7c6e1f1b987f64cd189aa33c95f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html#aef0cf7c6e1f1b987f64cd189aa33c95f">removeEmptyArrays</a> ()</td></tr>
<tr class="separator:aef0cf7c6e1f1b987f64cd189aa33c95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a997069c09e8bc1e087ef3ba74165fae0"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html#a997069c09e8bc1e087ef3ba74165fae0">formatBytesToMegabytes</a> (size_t iSizeInBytes)</td></tr>
<tr class="separator:a997069c09e8bc1e087ef3ba74165fae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a72c1e9f423b132a8b28bdb05ab7974e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classne_1_1GpuResourceManager.html">GpuResourceManager</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html#a72c1e9f423b132a8b28bdb05ab7974e5">pResourceManager</a> = nullptr</td></tr>
<tr class="separator:a72c1e9f423b132a8b28bdb05ab7974e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ba191348b2a3c44ad938c0ac6d0d04"><td class="memItemLeft" align="right" valign="top">std::pair&lt; std::recursive_mutex, std::unordered_map&lt; std::string, std::unique_ptr&lt; <a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArray.html">DynamicCpuWriteShaderResourceArray</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html#aa2ba191348b2a3c44ad938c0ac6d0d04">mtxCpuWriteShaderResourceArrays</a></td></tr>
<tr class="separator:aa2ba191348b2a3c44ad938c0ac6d0d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:adae7caaeccb7350c6ffed5ec426b1b21"><td class="memItemLeft" align="right" valign="top"><a id="adae7caaeccb7350c6ffed5ec426b1b21" name="adae7caaeccb7350c6ffed5ec426b1b21"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>GpuResourceManager</b></td></tr>
<tr class="separator:adae7caaeccb7350c6ffed5ec426b1b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Manages CPU-write arrays to shader resource arrays.</p>
<p >Its main purpose is to avoid possible duplication of shader resource arrays (when 2 or more arrays handle the same shader resource). </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a23ccad251759dad28a838bba4707595f" name="a23ccad251759dad28a838bba4707595f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23ccad251759dad28a838bba4707595f">&#9670;&#160;</a></span>DynamicCpuWriteShaderResourceArrayManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ne::DynamicCpuWriteShaderResourceArrayManager::DynamicCpuWriteShaderResourceArrayManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classne_1_1GpuResourceManager.html">GpuResourceManager</a> *&#160;</td>
          <td class="paramname"><em>pResourceManager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Resource manager that owns this manager</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pResourceManager</td><td>Owner manager. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a997069c09e8bc1e087ef3ba74165fae0" name="a997069c09e8bc1e087ef3ba74165fae0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a997069c09e8bc1e087ef3ba74165fae0">&#9670;&#160;</a></span>formatBytesToMegabytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ne::DynamicCpuWriteShaderResourceArrayManager::formatBytesToMegabytes </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>iSizeInBytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Formats the specified size in bytes to the following format: "&lt;number&gt; MB", for example the number 1512 will be formatted to the following text: "0.0014 MB".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iSizeInBytes</td><td>Size in bytes to format.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Formatted text. </dd></dl>

</div>
</div>
<a id="a656266f96634a2bac890181a028d17eb" name="a656266f96634a2bac890181a028d17eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a656266f96634a2bac890181a028d17eb">&#9670;&#160;</a></span>getArrayForShaderResource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArray.html">DynamicCpuWriteShaderResourceArray</a> * ne::DynamicCpuWriteShaderResourceArrayManager::getArrayForShaderResource </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sShaderResourceName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Attempts to find an array that handles shader resource of the specified name.</p>
<dl class="section remark"><dt>Remarks</dt><dd>Mostly used for automated testing.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sShaderResourceName</td><td>Name of the shader resource (from shader code).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>nullptr</code> if not found, otherwise a valid pointer. </dd></dl>

</div>
</div>
<a id="aef0cf7c6e1f1b987f64cd189aa33c95f" name="aef0cf7c6e1f1b987f64cd189aa33c95f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef0cf7c6e1f1b987f64cd189aa33c95f">&#9670;&#160;</a></span>removeEmptyArrays()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ne::DynamicCpuWriteShaderResourceArrayManager::removeEmptyArrays </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Goes through all arrays in <a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html#aa2ba191348b2a3c44ad938c0ac6d0d04">mtxCpuWriteShaderResourceArrays</a> and removed empty ones. </p>

</div>
</div>
<a id="a99cd6f7a677bf97ab36c9ee8b0cca10a" name="a99cd6f7a677bf97ab36c9ee8b0cca10a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99cd6f7a677bf97ab36c9ee8b0cca10a">&#9670;&#160;</a></span>reserveSlotsInArray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::variant&lt; std::unique_ptr&lt; <a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArraySlot.html">DynamicCpuWriteShaderResourceArraySlot</a> &gt;, <a class="el" href="classne_1_1Error.html">Error</a> &gt; ne::DynamicCpuWriteShaderResourceArrayManager::reserveSlotsInArray </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classne_1_1ShaderCpuWriteResourceBinding.html">ShaderCpuWriteResourceBinding</a> *&#160;</td>
          <td class="paramname"><em>pShaderResource</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Requests a new slot in the array to be reserved. If an array for the shader resource (that the binding references) was never requested previously it will be created by this manager and the array will be binded to all pipelines that use this shader resource as a global shader resource binding.</p>
<dl class="section remark"><dt>Remarks</dt><dd>There is no <code>erase</code> function because slot destruction automatically uses internal <code>erase</code>, see documentation on the returned slot object.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pShaderResource</td><td><a class="el" href="classne_1_1Shader.html">Shader</a> resource that requires a slot in the array. If the array will resize, the specified resource (if it has an active slot in the array) will be automatically marked as "needs update" through the shader resource manager.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classne_1_1Error.html">Error</a> if something went wrong, otherwise slot of the newly added element in the array. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa2ba191348b2a3c44ad938c0ac6d0d04" name="aa2ba191348b2a3c44ad938c0ac6d0d04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ba191348b2a3c44ad938c0ac6d0d04">&#9670;&#160;</a></span>mtxCpuWriteShaderResourceArrays</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; std::recursive_mutex, std::unordered_map&lt;std::string, std::unique_ptr&lt;<a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArray.html">DynamicCpuWriteShaderResourceArray</a>&gt; &gt; &gt; ne::DynamicCpuWriteShaderResourceArrayManager::mtxCpuWriteShaderResourceArrays</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Stores pairs of "shader resource name" - "array that handles the shader resource", where "shader resource name" is the name of the resource written in the shader file. </p>

</div>
</div>
<a id="a72c1e9f423b132a8b28bdb05ab7974e5" name="a72c1e9f423b132a8b28bdb05ab7974e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72c1e9f423b132a8b28bdb05ab7974e5">&#9670;&#160;</a></span>pResourceManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classne_1_1GpuResourceManager.html">GpuResourceManager</a>* const ne::DynamicCpuWriteShaderResourceArrayManager::pResourceManager = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Owner of this manager. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/engine_lib/private/shader/general/resource/cpuwrite/<a class="el" href="DynamicCpuWriteShaderResourceArrayManager_8h_source.html">DynamicCpuWriteShaderResourceArrayManager.h</a></li>
<li>src/engine_lib/private/shader/general/resource/cpuwrite/DynamicCpuWriteShaderResourceArrayManager.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>ne</b></li><li class="navelem"><a class="el" href="classne_1_1DynamicCpuWriteShaderResourceArrayManager.html">DynamicCpuWriteShaderResourceArrayManager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
